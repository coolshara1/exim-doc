
.. _ch14_00:

Главная конфигурация
====================

Первая часть файла рабочей конфигурации содержит три типа элементов:

* Макроопределения: Эти строки начинаются с символа в верхнем регистре. Смотрите раздел :ref:`6.4 <ch06_04>` для получения дополнительных деталей о макрообработке.
* Определения именованных списков: Эти строки начинаются с одного из слов **domainlist**, **hostlist**, **addresslist**, или **localpartlist**. Их использование описано в разделе :ref:`10.5 <ch10_05>`.
* Главные конфигурационные настройки: Каждая установка занимает одну строку файла (с возможностью продолжения). Если какой-либо установке предшествует слово **hide**, опция командной строки **-bP** отображает её значение лишь административным пользователям. Смотрите раздел :ref:`6.10 <ch06_10>` для описания синтаксиса этих параметров настройки.

Эта глава определяет все главные конфигурационные опции, наряду с их типами и дефолтовыми значениями. Для простоты нахождения специфической опции, они перечислены в алфавитном порядке ниже, в разделе :ref:`14.23 <ch14_23>`. Однако, поскольку сейчас тут очень много опций, они, вначале, кратко перечислены в функциональных группах, как помощь, для нахождения имени опции, которую вы ищете. Некоторые опции перечислены более чем в одной группе.

.. _ch14_01:

Разное
------
=========================  ======================
**bi_command**             запускается при опции командной строки **-bi**
**disable_ipv6**           не обрабатывать IPv6
**keep_malformed**         для повреждённых файлов - должно не случаться
**localhost_number**       для уникальных идентификаторов сообщений, в кластерах
**message_body_newlines**  сохранять число переводов строки в ``$message_body``
**message_body_visible**   как много показывать в ``$message_body``
**mua_wrapper**            работать в режиме **MUA wrapper**
**print_topbitchars**      печатать  символы верхних битов
**timezone**               принудительная установка часового пояса
=========================  ======================

.. _ch14_02:

Параметры Exim
--------------

=========================  ====================== 
**exim_group**             переопределяет вкомпиленное значение
**exim_path**              переопределяет вкомпиленное значение
**exim_user**              переопределяет вкомпиленное значение
**primary_hostname**       дефолт из *uname()*
**split_spool_directory**  использовать много директорий
**spool_directory**        переопределяет вкомпиленное значение
=========================  ======================


.. _ch14_03:

Настройки привелегий
--------------------

=============================  =====================
**admin_groups**               список административных групп
**deliver_drop_privilege**     отказ от root`овых прав при доставке
**local_from_check**           вставлять “Sender:”, если необходимо
**local_from_prefix**          для проверки “From:”, для локального отправителя
**local_from_suffix**          для проверки “From:”, для локального отправителя
**local_sender_retain**        оставлять “Sender:”, для недоверенных пользователей
**never_users**                не запускать доставки под этими пользователями
**prod_requires_admin**        принудительная доставка требует административного пользователя
**queue_list_requires_admin**  листинг очереди требует административного пользователя
**trusted_groups**             группы, которым доверяют
**trusted_users**              пользователи, которым доверяют
=============================  =====================

.. _ch14_04:

Логгинг
-------

==========================  =========
**hosts_connection_nolog**  не логгировать соединения
**log_file_path**           переопределяет вкомпиленные значения
**log_selector**            установить/сбросить опциональный логгинг
**log_timezone**            добавлять в строки логов временную зону
**message_logs**            создавать логи для каждого сообщения
**preserve_message_logs**   оставлять логи каждого сообщения после обработки
**process_log_path**        для ``SIGUSR1`` и *exiwhat*
**syslog_duplication**      контролировать повторяющиеся строки логов в syslog
**syslog_facility**         установка поля “facility” в syslog
**syslog_processname**      установка поля “ident” в syslog
**syslog_timestamp**        временная метка в строках syslog
**write_rejectlog**         контролирует использование лога сообщений
==========================  =========

.. _ch14_05:

Замороженные сообщения
----------------------

========================  ==========
**auto_thaw**             устанавливает время повтора, для замороженного сообщения
**freeze_tell**           посылка сообщения, когда происходит заморозка
**move_frozen_messages**  в другую директорию
**timeout_frozen_after**  как долго хранить замороженные сообщения
========================  ==========

.. _ch14_06:

Поиск данных
------------

========================  =========
**ibase_servers**         сервера InterBase
**ldap_default_servers**  используется, если нет сервера в запросе
**ldap_version**          устанавливает версию протокола
**lookup_open_max**       сколько файлов держать открытыми
**mysql_servers**         список MySQL-серверов по умолчанию
**oracle_servers**        сервера Oracle
**pgsql_servers**         список PostgreSQL-серверов по умолчанию
**sqlite_lock_timeout**   смысл соответствует названию опции
========================  =========

.. _ch14_07:

Идентификаторы сообщений
------------------------

============================  =========
**message_id_header_domain**  используется для построения заголовка “Message-ID:”
**message_id_header_text**    смысл соответствует названию опции
============================  =========

.. _ch14_08:

Запуск встроенного Perl`a
-------------------------

=================  ===========
**perl_at_start**  всегда запускать интерпретатор
**perl_startup**   код для выполнения, при запуске Perl
=================  ===========


.. _ch14_09:

Даемон
------

==========================  ==============
**daemon_smtp_ports**       дефолтовые порты
**daemon_startup_retries**  число повторов при неудачном запуске
**daemon_startup_sleep**    время ожидания между повторными запусками
**extra_local_interfaces**  какие интерфейсы необязательно слушать
**local_interfaces**        какие интерфейсы слушать, с опциональным номером порта
**pid_file_path**           перезадаёт вкомпиленное значение
**queue_run_max**           максимальное число одновременных обработчиков очереди
==========================  ==============


.. _ch14_10:

Контроль ресурсов
-----------------

====================================  ============================================
**check_log_inodes**                  до приёма сообщения
**check_log_space**                   до приёма сообщения
**check_spool_inodes**                до приёма сообщения
**check_spool_space**                 до приёма сообщения
**deliver_queue_load_max**            не обрабатывать очередь при высокой загрузке
**queue_only_load**                   при высокой загрузке, входящие сообщения, только класть в очередь
**queue_only_load_latch**             не переоценивать нагрузку, для каждого сообщения
**queue_run_max**                     максимальное число одновременных обработчиков очереди
**remote_max_parallel**               параллельных SMTP доставок, на сообщение
**smtp_accept_max**                   одновременных входящих соединений
**smtp_accept_max_nonmail**           не-почтовых команд
**smtp_accept_max_nonmail_hosts**     хосты к которым применяются ограничения
**smtp_accept_max_per_connection**    сообщений за соединение
**smtp_accept_max_per_host**          соединений с одного хоста
**smtp_accept_queue**                 при большом числе соединений, класть сообщения в очередь, не доставлять
**smtp_accept_queue_per_connection**  класть в очередь, при большом числе сообщений за одно соединение
**smtp_accept_reserve**               принимать только от зарезервированных хостов, если много соединений
**smtp_check_spool_space**            проверять свободное место, исходя из SIZE в команде MAIL
**smtp_connect_backlog**              передаётся стеку TCP/IP
**smtp_load_reserve**                 SMTP с зарезервированных хостов, при высокой загрузке
**smtp_reserve_hosts**                список зарезервированных хостов
====================================  ============================================

.. _ch14_11:

Управление политиками
---------------------

==========================  =======================
**acl_not_smtp**            ACL для не-SMTP сообщений
**acl_not_smtp_mime**       ACL для не-SMTP частей MIME
**acl_not_smtp_start**      ACL для запуска не-SMTP сообщений
**acl_smtp_auth**           ACL для AUTH
**acl_smtp_connect**        ACL для соединений
**acl_smtp_data**           ACL для DATA
**acl_smtp_etrn**           ACL для ERTN
**acl_smtp_expn**           ACL для EXPN
**acl_smtp_helo**           ACL для HELO или EHLO
**acl_smtp_mail**           ACL для MAIL
**acl_smtp_mailauth**       ACL для команды AUTH в команде MAIL
**acl_smtp_mime**           ACL для чaстей MIME
**acl_smtp_predata**        ACL для начала данных
**acl_smtp_quit**           ACL для QUIT
**acl_smtp_rcpt**           ACL для RCPT
**acl_smtp_starttls**       ACL для STARTTLS
**acl_smtp_vrfy**           ACL для VRFY
**av_scanner**              определяет сканер вирусов
**check_rfc2047_length**    проверяет, длинну “закодированных слов” (по :rfc:`2047`)
**dns_csa_search_limit**    контролирует вложенность поисков CSA
**dns_csa_use_reverse**     включение/выключение реверсивных поисков IP CSA
**header_maxsize**          полный размер заголовка сообщения
**header_line_maxsize**     ограничения строки одного заголовка
**helo_accept_junk_hosts**  позволить синтаксические ошибки для этих хостов
**helo_allow_chars**        разрешить неправильные символы в HELO
**helo_lookup_domains**     искать имя хоста для этих имён в HELO
**helo_try_verify_hosts**   мягкая проверка HELO для этих хостов
**helo_verify_hosts**       жёсткая проверка HELO для этих хостов
**host_lookup**             искать имя хоста [#]_ для этих хостов
**host_lookup_order**       порядок поиска имён в DNS и локально
**host_reject_connection**  отклонить соединения с этих хостов
**hosts_treat_as_local**    полезно для некоторых кластерных конфигураций
**local_scan_timeout**      таймаут для *local_scan()*
**message_size_limit**      для всех сообщений
**percent_hack_domains**    распознавать %-хак, для этих доменов
**spamd_address**           указать интерфейс к SpamAssassin
**strict_acl_vars**         объект для отключения переменных ACL
==========================  =======================


.. _ch14_12:

Кэш обратных вызовов
--------------------


.. _ch14_13:

TLS
---


.. _ch14_14:

Локальная обработка пользователей
---------------------------------


.. _ch14_15:

Все входящие сообщения (SMTP и не-SMTP)
---------------------------------------


.. _ch14_16:

Входящие не-SMTP сообщения
--------------------------


.. _ch14_17:

Входящие SMTP сообщения
-----------------------


.. _ch14_18:

Расширения SMTP
---------------


.. _ch14_19:

Обработка сообщений
-------------------


.. _ch14_20:

Системный фильтр
----------------


.. _ch14_21:

Роутинг и доставка
------------------


.. _ch14_22:

Рикошеты и предупрждающие сообщения
-----------------------------------


.. _ch14_23:

Алфавитный список главных опций
-------------------------------
Те опции, которые подвергаются раскрытию строки, до использования, помечены символом **†**.

===================  =========  =============  ==============
**accept_8bitmime**  Use: main  Type: boolean  Default: false
===================  =========  =============  ==============

Эта опция заставляет exim посылать 8BITMIME в его ответе на команду SMTP EHLO, и принимать параметр BODY= в командах MAIL. Однако, хотя exim чисто 8-битовый, он не конвертер протоколов, и не принимает каких-либо специальных действий для сообщений полученных в соответствии с этим маршрутом. Следовательно, по умолчанию эта опция отключена.

.. [#] в DNS - прим. lissyara
