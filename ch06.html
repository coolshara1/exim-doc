
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Файл конфигурации Exim во время выполнения &mdash; Specification of the Exim Mail Transfer Agent 4.70 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.70',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Specification of the Exim Mail Transfer Agent 4.70 documentation" href="index.html" />
    <link rel="next" title="Файл конфигурации по умолчанию" href="ch07.html" />
    <link rel="prev" title="Командная строка Exim" href="ch05.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>
    <div class="related">
      <h3>Просмотр</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Словарь-указатель"
             accesskey="I">словарь</a></li>
        <li class="right" >
          <a href="ch07.html" title="Файл конфигурации по умолчанию"
             accesskey="N">следующий</a> |</li>
        <li class="right" >
          <a href="ch05.html" title="Командная строка Exim"
             accesskey="P">предыдущий</a> |</li>
        <li><a href="index.html">Specification of the Exim Mail Transfer Agent 4.70 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="exim">
<span id="ch06-00"></span><h1>Файл конфигурации Exim во время выполнения<a class="headerlink" href="#exim" title="Ссылка на этот заголовок">¶</a></h1>
<p>Во время выполнения, Exim использует один конфигурационный файл (“run time configuration file”), читаемый каждый раз при выполнении двоичного файла Exim`a. Обратите внимание, что в нормальных условиях, это происходит часто, поскольку Exim спроектирован для работы распределённым способом, без центрального контроля.</p>
<p>Если при чтении конфигурационного файла обнаруживается синтаксическая ошибка, Exim записывает сообщение на стандартный поток ошибок, и выходит с ненулевым кодом возврата. Также записывается сообщение в лог паники.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">В это время могут быть детектированы лишь простые синтаксические ошибки. Значения любых раскрываемых параметров не проверяются, пока не произойдёт раскрытие, даже когда раскрытие не изменяет строку.</p>
</div>
<p>Имя файла рабочей конфигурации (“run time configuration file”) вкомпилено в бинарник по соображениям безопасности, и указывается параметром сборки “CONFIGURE_FILE”. В большинстве конфигураций, она задаёт единственный файл. Однако, разрешается задать список имён файлов, разделённых двоеточиями, в этом случае Exim использует первый существующий файл из списка.</p>
<p>Файл рабочей конфигурации должен принадлежать пользователю root, или пользователю, заданному во время компиляции параметром “CONFIGURE_OWNER” (если установлено). Конфигурационный файл не должен быть читаемым для всех или для группы, исключая группу указанную при компиляции в параметре “EXIM_GROUP” или в параметре “CONFIGURE_GROUP”.</p>
<div class="admonition warning">
<p class="first admonition-title">Предупреждение</p>
<p class="last">В обычной конфигурации, где бинарный файл Exim`a - setuid root`a, любой кто имеет право редактировать файл рабочей конфигурации, обладает простым способом запускать команды от root`a. Если вы делаете ваших почтовых администраторов членами группы Exim, но не доверяете им права root, убедитесь, что рабочая конфигурация не доступна на запись группе.</p>
</div>
<p>Файл конфигурации по умолчанию, который будет корректно работать в простых ситуациях, предоставлен в файле “src/configure.default”. Если параметр “CONFIGURE_FILE” задаёт лишь одно имя файла, процесс установки копирует конфигурационный файл по умолчанию в новый файл, если он не существовал <a class="footnote-reference" href="#id29" id="id1">[1]</a>. Если “CONFIGURE_FILE” - список, он не инсталлируется автоматически. Глава <a class="reference internal" href="ch07.html#ch07-00"><em>7</em></a> - обсуждение “сквозного контроля” заданной по умолчанию конфигурации.</p>
<div class="section" id="ch06-01">
<span id="id2"></span><h2>Использование иного файла конфигурации<a class="headerlink" href="#ch06-01" title="Ссылка на этот заголовок">¶</a></h2>
<p>Одноразовая альтернативная конфигурация может быть задана использованием параметра <strong>-C</strong> командной строки, которая может задать единственный файл, или список файлов. Однако, когда используется параметр <strong>-C</strong>, Exim отменяет свои root`овые привилегии, за исключением запуска его root`ом или пользователем Exim`a (или, если параметр для <strong>-C</strong> идентичен со встроенным значением из <em>CONFIGURE_FILE</em>). Параметр <strong>-C</strong>, главным образом, полезна для проверки синтаксиса конфигурационного файла до его инсталляции. Проверки владельца и группы, для конфигурационного файла заданного параметром <strong>-C</strong>, не проводятся.</p>
<p>Привилегированное использование параметра <strong>-C</strong> пользователем Exim`a может быть заблокировано установкой <em>ALT_CONFIG_ROOT_ONLY</em> в <em>Local/Makefile</em>, при сборке Exim`a. Однако, если вы это сделаете, вы также заблокируете возможность тестирования конфигурационного файла с использованием параметра <strong>-C</strong>, на приём сообщений и доставку, даже если Exim будет вызван от пользователя root. Приём работает, но к тому времени Exim работает от своего пользователя, таким образом когда он перезапускает себя для возвращения root`овых привилегий, для доставки, использование параметра <strong>-C</strong> заставляет его потерять права доступа. Однако root может тестировать приём и доставку, используя две разные команды (одна для помещения сообщения в очередь - <strong>-odq</strong>, и другая для доставки - <strong>-M</strong>).</p>
<p>Если <em>ALT_CONFIG_PREFIX</em> задан в <em>Local/Makefile</em>, он определяет строку префикса, с которой должен начинаться любой файл в параметре командной строки <strong>-C</strong>. Кроме того, имя файла не должно содержать последовательность “/../”. Нет настройки по умолчанию для <em>ALT_CONFIG_PREFIX</em>; когда он не задан, любое имя файла может использоваться с параметром <strong>-C</strong>.</p>
<p>Одноразовые изменения конфигурации могут быть заданы параметром командной строки <strong>-D</strong>, определяющей и отменяющей значения для макросов используемых в конфигурационном файле. Однако, как и <strong>-C</strong>, использование этого параметра непривилегированными пользователями вынуждает Exim отменить свои root`овые права. Если в <em>Local/Makefile</em> задан параметр <em>DISABLE_D_OPTION</em>, использование параметра <strong>-D</strong> полностью отключено, и попытка её использования вызывает немедленный выход с ошибкой.</p>
<p>Некоторые серверы могут использовать один и тот же бинарник Exim`a на различных машинах с совместно используемой файловой системой, но используя разные конфигурационные файлы на каждой машине. Если в <em>Local/Makefile</em> задан параметр <em>CONFIGURE_FILE_USE_NODE</em>, Exim вначале ищет конфигурационный файл с именем конфигурационного файла, сопровождаемого точкой и именем узла машины, полученным из функции <em>uname()</em>. Если файл не существует, используется стандартное имя. Эта обработка происходит для каждого имени файла из списка заданного <em>CONFIGURE_FILE</em> или <strong>-C</strong>.</p>
<p>В некоторых тайных <a class="footnote-reference" href="#id30" id="id3">[2]</a> ситуациях различные версии Exim`a могут быть запущены под разными эффективными uid и определен параметр <em>CONFIGURE_FILE_USE_EUID</em> чтобы помочь этому. Смотрите комментарии в <em>src/EDITME</em> для деталей.</p>
</div>
<div class="section" id="ch06-02">
<span id="id4"></span><h2>Формат файла конфигурации<a class="headerlink" href="#ch06-02" title="Ссылка на этот заголовок">¶</a></h2>
<p>Файл конфигурации Exim`a разделён на множество частей. Общие параметры настройки должны всегда быть в начале файла. Другие части являются необязательными и могут фигурировать в любом порядке. Каждая часть, кроме первой, вводится словом начинающимся с <em>begin</em>, сопровождаемым именем части. Необязательные части:</p>
<ul>
<li><p class="first"><em>ACL</em>: Списки контроля доступа для контроля входящей SMTP почты (смотрите главу <a class="reference internal" href="ch40.html#ch40-00"><em>40</em></a>).</p>
</li>
<li><p class="first"><em>authenticators</em>: Конфигурационные настройки для драйверов аутентификации. Они связаны с командой SMTP AUTH (смотрите главу <a class="reference internal" href="ch33.html#ch33-00"><em>33</em></a>).</p>
</li>
<li><p class="first"><em>routers</em>: Конфигурационные настройки для драйверов маршрутизаторов. Маршрутизаторы обрабатывают адреса и определяют как сообщение необходимо доставлять (смотрите главы <a class="reference internal" href="ch15.html#ch15-00"><em>15</em></a>-<a class="reference internal" href="ch22.html#ch22-00"><em>22</em></a>).</p>
</li>
<li><p class="first"><em>transports</em>: Конфигурационные настройки для драйверов транспортов. Транспорты задают механизмы для копирования сообщения в места назначения смотрите главы <a class="reference internal" href="ch24.html#ch24-00"><em>24</em></a>-<a class="reference internal" href="ch30.html#ch30-00"><em>30</em></a>).</p>
</li>
<li><p class="first"><em>retry</em>: Правила повторов, для использования когда сообщение не может быть доставлено немедленно. Если секция повторов отсутствует, или если она пустая (т.е. - правил повторов не задано), Exim не повторяет доставки. В этой ситуации, временные ошибки обрабатываются как постоянные. Правила повторов рассматриваются в главе <a class="reference internal" href="ch32.html#ch32-00"><em>32</em></a>.</p>
</li>
<li><p class="first"><em>rewrite</em>: Правила глобальной перезаписи адресов, для использования когда сообщение приходит и когда новые адреса созданы во время доставки. Перезапись рассмотрена в главе <a class="reference internal" href="ch31.html#ch31-00"><em>31</em></a>.</p>
</li>
<li><p class="first"><em>local_scan</em>: Частный параметр для функции <em>local_scan()</em>. Если вы хотите использовать эту возможность, вы должны задать:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LOCAL_SCAN_HAS_OPTIONS</span><span class="o">=</span><span class="n">yes</span>
</pre></div>
</div>
</li>
</ul>
<p>в <em>Local/Makefile</em> до сборки Exim. Детали о <em>local_scan()</em> даны в главе <a class="reference internal" href="ch42.html#ch42-00"><em>42</em></a>.</p>
<p>Начальные и замыкающие пробелы в строках конфигурации всегда игнорируются.</p>
<p>Пустые строки в файле, и строки начинающиеся с символа # (игнорируя начальное пустое пространство) обрабатываются как комментарии и игнорируются. Примечание: Символ # кроме как в начале строки не обрабатывается специальным образом, и не является комментарием.</p>
<p>Любая строка не являющаяся комментарием может быть продолжена, если её завершить символом обратного слэша (). Обратите внимание, что общее правило, для пустого пространства, означает, что появление пробелов после обратного слэша и начальных пробелов в начале строк продолжения игнорируется. Строки комментариев, начинающиеся с # (но не пустые строки), могут появиться в середине последовательности строк продолжения.</p>
<p>Удобный способ создания конфигурационного файла заключается в том, чтобы начать с файла по умолчанию, представленного в <em>src/configure.default</em>, и добавлять, удалять или изменять настройки как требуется.</p>
<p>ACL`ы, правила повторов, и правила перезаписи имеют их собственный синтаксис, который описан в главах <a class="reference internal" href="ch40.html#ch40-00"><em>40</em></a>, <a class="reference internal" href="ch32.html#ch32-00"><em>32</em></a> и <a class="reference internal" href="ch31.html#ch31-00"><em>31</em></a> соответственно. Другие части конфигурационного файла имеют некоторые общие синтаксические пункты, и они описаны ниже, от раздела <a class="reference internal" href="#ch06-10"><em>6.10</em></a> и далее. До этого описаны средства включения, макрокоманд и условий средств.</p>
</div>
<div class="section" id="ch06-03">
<span id="id5"></span><h2>Включения файлов в файл конфигурации<a class="headerlink" href="#ch06-03" title="Ссылка на этот заголовок">¶</a></h2>
<p>Вы можете включать другие файлы внутри файла рабочей конфигурации Exim`a, используя этот синтаксис:</p>
<div class="highlight-python"><pre>.include &lt;file name&gt;
.include_if_exists &lt;file name&gt;</pre>
</div>
<p>в отдельных строках. Двойные кавычки вокруг имени файла - необязательны. Если вы используете первую форму, если файл не существует, происходит ошибка конфигурации; вторая форма, ничего не делает, в случае несуществующих файлов. Во всех случаях, требуются абсолютные имена.</p>
<p>Включенный файл может быть на любой глубине вложенности, но помните, что Exim часто читает конфигурационный файл, поэтому хорошей идеей будет хранить их на минимальной глубине. Если вы меняете содержимое включаемого файла, вы должны дать даемону сигнал HUP, поскольку включенный файл в момент чтения конфигурации в режиме доступа - только на чтение.</p>
<p>Обработка включений происходит рано, на физическом уровне строки, таким образом, как и строки комментариев, включения могут использоваться в середине параметра настройки, например:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">hosts_lookup</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span> \
               <span class="o">.</span><span class="n">include</span> <span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="nb">file</span>
</pre></div>
</div>
<p>Процесс включения происходит после обработки макрокоманд (смотрите ниже). Этот эффект обрабатывает включенные строки так, как будто они находятся в месте, где произошло включение.</p>
</div>
<div class="section" id="ch06-04">
<span id="id6"></span><h2>Макросы в конфигурационном файле<a class="headerlink" href="#ch06-04" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если строка, в основной части конфигурации (т.е. до первой строки “begin”), начинается с символа верхнего регистра, она берётся как макроопределение, и должна иметь форму:</p>
<div class="highlight-python"><pre>&lt;name&gt; = &lt;rest of line&gt;&lt;name&gt; = &lt;rest of line&gt;</pre>
</div>
<p>Имя должно состоять из букв, цифр и символов подчёркивания, и нет необходимости, чтобы все они были в верхнем регистре, хотя это рекомендуется. Оставшаяся часть строки, включая любое продолжение, является текстом замены, и из неё удаляется начальное и завершающее пустое пространство. Кавычки не удаляются. Текст замены не может завершаться символом обратного слэша, но это несерьёзное ограничение.</p>
<p>Макрос, также может быть задан между маршрутизатором и транспортом, аутентификатором, или определением ACL. Однако, они не могут быть определены внутри определённых драйверов или ACL, или в <strong>local_scan</strong>, или секции повторов конфигурации.</p>
</div>
<div class="section" id="ch06-05">
<span id="id7"></span><h2>Макроподстановка<a class="headerlink" href="#ch06-05" title="Ссылка на этот заголовок">¶</a></h2>
<p>Как только макрос определён, все последующие строки файла (и любых включенных файлов) сканируются на предмет имени макроса; если есть несколько макросов, строки сканируются по очереди их оправления, для каждого макроса. Текст замены не сканируется повторно, для текущей макрокоманды, хотя он сканируется для впоследствии заданных макросов. Поэтому, имена макрокоманд, не могут содержать, как подстроку, имя ранее заданного макроса. Например, вы могли бы задать:</p>
<div class="highlight-python"><pre>ABCD_XYZ = &lt;something&gt;
ABCD = &lt;something else&gt;</pre>
</div>
<p>но помещение объявлений в обратном порядке, вызвало бы конфигурационную ошибку. Раскрытие макросов применяется к индивидуальным физическим строкам файла, до проверки продолжения строки или включений (смотрите выше). Если строка состоит лишь из имени макроса, и раскрытие макроса пустое, строка игнорируется. Макрос, в начале строки, может превратить строку в строку комментария, или в строку <tt class="docutils literal"><span class="pre">.include</span></tt>.</p>
<div class="section" id="ch06-06">
<span id="id8"></span><h3>Переопределение макроса<a class="headerlink" href="#ch06-06" title="Ссылка на этот заголовок">¶</a></h3>
<p>После определения, значение макроса может быть переопределено позднее, в конфигурации (или в включенном файле). Переопределение задаётся использованием “==” вместо “=”. Например:</p>
<div class="highlight-python"><pre>MAC =  initial value
...
MAC == updated value</pre>
</div>
<p>Переопределение не меняет порядок в котором макрос применяется к последующим строкам конфигурации. Порядок остаётся тем же самым, в котором макросы были изначально заданы. Всё, что изменяется, - значение макроса. Переопределение позволяет накапливать значения. Например:</p>
<div class="highlight-python"><pre>MAC =  initial value
...
MAC == MAC and something added</pre>
</div>
<p>Это может быть полезным в ситуации, когда конфигурационный файл собирается из множества других файлов.</p>
</div>
</div>
<div class="section" id="ch06-07">
<span id="id9"></span><h2>Отмена значения макроса<a class="headerlink" href="#ch06-07" title="Ссылка на этот заголовок">¶</a></h2>
<p>Набор значений для макроса, в конфигурационном файле, может быть отменён параметром <strong>-D</strong> командной строки, но при его использовании, Exim снимает свои root`овые права, если он вызван не root`ом или пользователем Exim`a. Задание параметра <strong>-D</strong>, в командной строке, заставляет игнорироваться все определения и переопределения в пределах файла.</p>
</div>
<div class="section" id="ch06-08">
<span id="id10"></span><h2>Пример использования макроса<a class="headerlink" href="#ch06-08" title="Ссылка на этот заголовок">¶</a></h2>
<p>Как пример макроса, рассмотрим конфигурацию, где синонимы ищутся в ДБ MySQL. Это помогает оставить файл менее беспорядочным, если длинные строки, например SQL-запросы, определены отдельно, как макрос, например:</p>
<div class="highlight-python"><pre>ALIAS_QUERY = select mailbox from user where \
              login='${quote_mysql:$local_part}';</pre>
</div>
<p>Тогда это может использоваться в маршрутизаторе <strong>redirect</strong>, устанавливаемом примерно так:</p>
<div class="highlight-python"><pre>data = ${lookup mysql{ALIAS_QUERY}}</pre>
</div>
<p>В более ранних версиях Exim, макрос, иногда, использовался для списков доменов, хостов, или адресов. В Exim v4 они лучше обрабатываются именованными списками - смотрите раздел <a class="reference internal" href="ch10.html#ch10-05"><em>10.5</em></a>.</p>
</div>
<div class="section" id="ch06-09">
<span id="id11"></span><h2>Условные пропуски в конфигурационном файле<a class="headerlink" href="#ch06-09" title="Ссылка на этот заголовок">¶</a></h2>
<p>Вы можете использовать директивы <tt class="docutils literal"><span class="pre">.ifdef</span></tt>, <tt class="docutils literal"><span class="pre">.ifndef</span></tt>, <tt class="docutils literal"><span class="pre">.elifdef</span></tt>, <tt class="docutils literal"><span class="pre">.elifndef</span></tt>, <tt class="docutils literal"><span class="pre">.else</span></tt> и <tt class="docutils literal"><span class="pre">.endif</span></tt> для динамического включения или исключения частей конфигурационного файла. Обработка происходит каждый раз, когда файл читается (т.е. когда запускается исполняемый файл Exim).</p>
<p>Реализация очень проста. Примеры четырёх первых директив должны сопровождаться текстом, включающим имена одного и более макросов. Условие проверяется, действительно ли происходила подстановка макроса в строке. Таким образом:</p>
<div class="highlight-python"><pre>.ifdef AAA
message_size_limit = 50M
.else
message_size_limit = 100M
.endif</pre>
</div>
<p>устанавливает ограничение размера сообщения в 50mb, если задан макрос AAA, и 100MB в ином случае. Если задано более одного имени макроса в строке, условие истинно, если задано любое из них. Таким образом, это условие “or” (“или”). Чтобы получить условие “and”, вам необходимо использовать вложенное <tt class="docutils literal"><span class="pre">.ifdefs</span></tt>.</p>
<p>Хотя вы можете использовать макрораскрытие для создания одной из этих директив, это не очень полезно, поскольку условие “в этой строке была макроподстановка” (“there was a macro substitution in this line”) будет всегда истинным.</p>
<p>Текст следующий за <tt class="docutils literal"><span class="pre">.else</span></tt> и <tt class="docutils literal"><span class="pre">.endif</span></tt> игнорируется, и может использоваться как комментарий, чтобы сделать пояснения к сложным вложениям.</p>
</div>
<div class="section" id="ch06-10">
<span id="id12"></span><h2>Общий синтаксис параметров<a class="headerlink" href="#ch06-10" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для основного набора параметров, параметров драйвера и параметра <tt class="docutils literal"><span class="pre">local_scan()</span></tt>, каждая настройка находится на отдельной строке, и начинается с имени, состоящего из символов в нижнем регистре, и символов подчёркивания. Многие параметры требуют значение с данными, и в этом случае, имя должно сопровождаться символом равно (“=”), с необязательными пробелами, и затем значение. Например:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qualify_domain</span> <span class="o">=</span> <span class="n">mydomain</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>Некоторые параметры настройки могут содержать уязвимые данные, например, пароль для доступа к базам данных. Для недопущения прочтения этих значений неадминистративными пользователями, используя параметр командной строки <strong>-bP</strong>, вы можете предварять их словом “hide” (“скрыть”). Например:</p>
<div class="highlight-python"><pre>hide mysql_servers = localhost/users/admin/secret-password</pre>
</div>
<p>Для неадминистративных пользователей, такие параметры отображаются как в примере:</p>
<div class="highlight-python"><pre>mysql_servers = &lt;value not displayable&gt;</pre>
</div>
<p>Если “hide” используется в параметрах драйвера, оно скрывает значение этих параметров во всех проявлениях этого драйвера.</p>
<p>Следующие разделы описывают синтаксис используемый для различных типов данных, находящихся в параметрах настроек.</p>
</div>
<div class="section" id="ch06-11">
<span id="id13"></span><h2>Булевы параметры<a class="headerlink" href="#ch06-11" title="Ссылка на этот заголовок">¶</a></h2>
<p>Параметры, тип которых даётся как булева переменная <a class="footnote-reference" href="#id31" id="id14">[3]</a> -  переключатели on/off. Возможны два способа определить такие параметры: с и без значением данных. Если имя параметра указано само по себе, без данных, - это значит “on”; если ему предшествует “no_” или “not_” - это значит “off”. Однако, булевы параметры могут быть сопровождены символом равно “=”, и одним из слов “true”, “false”, “yes”, или “no”, как альтернативный синтаксис. Например, следующие два параметра настройки, будут иметь одинаковый эффект:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">queue_only</span>
<span class="n">queue_only</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>Следующие две строки, также, имеют одинаковый (обратный) эффект:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">no_queue_only</span>
<span class="n">queue_only</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<p>Вы можете использовать тот синтаксис, который предпочитаете.</p>
</div>
<div class="section" id="ch06-12">
<span id="id15"></span><h2>Целочисленные значения<a class="headerlink" href="#ch06-12" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если тип параметра дан как “целочисленное” (“integer”), значение может быть задано в десятичном, шестнадцатеричном, или восьмеричном представлении. Если оно начинается с цифры больше нуля, предполагается десятичное число. Иначе, оно обрабатывается как восьмеричное число, за исключением случая когда оно начинается с символов “0x”, тогда оно обрабатывается как шестнадцатеричное число.</p>
<p>Если целочисленное значение сопровождается символом “K”, оно умножается на 1024; если оно сопровождается символом “M”, оно умножается на 1024x1024. Когда выводятся значения целочисленных параметров, значения, являющиеся точным множителем 1024 или 1024x1024, иногда, но не всегда, печатаются с использованием символов “K” и “M”. Стиль печати независим от использовавшегося, фактического, входного формата.</p>
</div>
<div class="section" id="ch06-13">
<span id="id16"></span><h2>Целочисленные восьмеричные значения<a class="headerlink" href="#ch06-13" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если тип параметра дан как “восьмеричное целое число”, его значение всегда интерпретируется как восьмеричное число, вне зависимости - начинается оно с нуля или нет. Такие параметры всегда выводятся в восьмеричном виде.</p>
</div>
<div class="section" id="ch06-14">
<span id="id17"></span><h2>Числа с фиксированной точкой<a class="headerlink" href="#ch06-14" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если тип параметра дан как “fixed-point”, его значение должно быть десятичным числом, необязательно сопровождаемым десятичной точкой, вплоть до трёх цифр после неё.</p>
</div>
<div class="section" id="ch06-15">
<span id="id18"></span><h2>Временные интервалы<a class="headerlink" href="#ch06-15" title="Ссылка на этот заголовок">¶</a></h2>
<p>Интервал времени указывается как последовательность чисел, каждое сопровождаемое буквой, без пробелов:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>s</strong></td>
<td>секунды</td>
</tr>
<tr class="row-even"><td><strong>м</strong></td>
<td>минуты</td>
</tr>
<tr class="row-odd"><td><strong>h</strong></td>
<td>часы</td>
</tr>
<tr class="row-even"><td><strong>d</strong></td>
<td>дни</td>
</tr>
<tr class="row-odd"><td><strong>w</strong></td>
<td>недели</td>
</tr>
</tbody>
</table>
<p>Например, “3h50m” задаёт 3 часа и 50 минут. Значения временных интервалов выводятся в таком же формате. Exim не ограничивает значения; он допускает, например, указать “90m” вместо “1h30m”.</p>
</div>
<div class="section" id="ch06-16">
<span id="id19"></span><h2>Строковые значения<a class="headerlink" href="#ch06-16" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если тип параметра определён как “строка”, значение может быть определено с двойными кавычками, или без них. Если оно не начинается с двойной кавычки, оно берётся как состоящее из остатка строки, плюс любые строки продолжения, начинающиеся с первого символа после любых начальных пробелов, с удалением пробелов в конце, и без интерпретации символов в строке. Поскольку Exim удаляет строки комментариев (т.е. начинающиеся с “#”) на ранней стадии, они могут появляться в середине многостроковых строк. Поэтому следующие настройки эквивалентны:</p>
<div class="highlight-python"><pre>trusted_users = uucp:mail
trusted_users = uucp:\
                # This comment line is ignored
                mail</pre>
</div>
<p>Если строка начинается с символа двойной кавычки, она должна завершаться заключительной двойной кавычкой, и любые символы обратного слэша, кроме как используемые для продолжения строки, интерпретируются как специальные символы (escape-последовательность), следующим образом:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">\\</span></tt></td>
<td>одиночный обратный слэш</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">\n</span></tt></td>
<td>символ новой строки</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">\r</span></tt></td>
<td>символ возврата каретки</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">\t</span></tt></td>
<td>символ табуляции (TAB)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">\&lt;octal</span> <span class="pre">digits&gt;</span></tt></td>
<td>до трёх восьмеричных цифр определяющих один символ</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">\x&lt;hex</span> <span class="pre">digits&gt;</span></tt></td>
<td>до двух шестнадцатеричных цифр определяющих один символ</td>
</tr>
</tbody>
</table>
<p>Если обратные слэш сопровождается какими-то другими символами, включая двойные кавычки, этот символ заменяет пару <a class="footnote-reference" href="#id32" id="id20">[4]</a>.</p>
<p>Квотирование <a class="footnote-reference" href="#id33" id="id21">[5]</a> необходимо лишь если вы хотите использовать escape-последовательности для вставки специальных символов, или необходимо определить значение с начальными и конечными пробелами. Эти случаи редки, таким образом использование двойных кавычек почти не необходимо в текущих версиях Exim`a. В версиях Exim до 3.14, двойные кавычки требовались для продолжения строки, таким образом, вы можете натолкнуться на старые конфигурационные файлы, и примеры, в которых применяется излишнее использование двойных кавычек.</p>
</div>
<div class="section" id="ch06-17">
<span id="id22"></span><h2>Раскрытие строк<a class="headerlink" href="#ch06-17" title="Ссылка на этот заголовок">¶</a></h2>
<p>Некоторые строки в конфигурационном файле подвергаются <em>раскрытию строки</em> (<em>string expansion</em>), при помощи которого различные части строки могут быть заменены, по обстановке (смотрите раздел <a class="reference internal" href="ch11.html#ch11-00"><em>11</em></a>). Входной синтаксис для таких строк лишь описан; в частности, обработка обратных слэшей внутри квотированных <a class="footnote-reference" href="#id34" id="id23">[6]</a> строк производится как часть входного процесса, до того как имеет место раскрытие. Однако, обратный слэш - также символ экранировки для раскрытия, таким образом, любые требуемые обратные слэши должны быть удвоены, если они в пределах конфигурационной строки в кавычках.</p>
</div>
<div class="section" id="ch06-18">
<span id="id24"></span><h2>Имена пользователей и групп<a class="headerlink" href="#ch06-18" title="Ссылка на этот заголовок">¶</a></h2>
<p>Имена пользователей и групп задаются как строки, с использованием синтаксиса описанного выше, но строки интерпретируются специальным образом. Имя пользователя или группы должно состоять полностью из цифр, или именем, которое может быть найдено функциями <tt class="docutils literal"><span class="pre">getpwnam()</span></tt> или <tt class="docutils literal"><span class="pre">getgrnam()</span></tt> соответственно.</p>
</div>
<div class="section" id="ch06-19">
<span id="id25"></span><h2>Построение списков<a class="headerlink" href="#ch06-19" title="Ссылка на этот заголовок">¶</a></h2>
<p>Данные для некоторых конфигурационных параметров - список элементов, с двоеточием в качестве разделителя по умолчанию. Многие из этих параметров оказываются типом “список строк” (“string list”) в описаниях, позже, в этом документе.Другие перечислены как “domain list”, “host list”, “address list”, или “local part list”. Синтаксически, они все одинаковы; однако, все, кроме “string list”, являются объектами для интерпретации, как описано в <a class="reference internal" href="ch10.html#ch10-00"><em>разделе 10</em></a>.</p>
<p>Во всех случаях, весь список обрабатывается как единая длинная строка, как того требует синтаксис. Пример - установка параметра <strong>trusted_users</strong>, выше, в разделе <a class="reference internal" href="#ch06-16"><em>6.16</em></a>. Если реально необходимо использовать двоеточие как элемент в списке, оно должно быть введено как два двоеточия. Начальные и конечные пробелы, в каждом элементе списка, игнорируются. Это позволяет включать элементы начинающиеся с двоеточия, в частности, определённые формы адресов IPv6. Например, список:</p>
<div class="highlight-python"><pre>local_interfaces = 127.0.0.1 : ::::1</pre>
</div>
<p>содержит два IP адреса, адрес IPv4 127.0.0.1 и адрес IPv6 ::1.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Несмотря на то, что начальные и конечные пробелы игнорируются в списке индивидуальных элементов, они не игнорируются при парсинге списка. Пробел после первого двоеточия, в примере выше, необходим. Если бы его там не было, то список интерпретировался бы как два элемента 127.0.0.1:: и 1.</p>
</div>
</div>
<div class="section" id="ch06-20">
<span id="id26"></span><h2>Смена разделителя списка<a class="headerlink" href="#ch06-20" title="Ссылка на этот заголовок">¶</a></h2>
<p>Удвоение двоеточий в адресах IPv6 - неприятная рутинная операция, таким образом был предоставлен механизм позволяющий изменить разделитель списка. Если список начинается с левой угловой скобки, сопровождаемой каким-либо символом пунктуации, этот символ используется, вместо двоеточия, как разделитель элементов списка. Для примера, список выше, может быть переписан с использованием точки с запятой в качестве разделителя:</p>
<div class="highlight-python"><pre>local_interfaces = &lt;; 127.0.0.1 ; ::1</pre>
</div>
<p>Это средство применяется ко всем спискам, за исключением списка в <strong>log_file_path</strong>. Рекомендуется, использовать иные символы, кроме двоеточия, было ограничено обстоятельствами, где они реально необходимы.</p>
<p>Также, возможно использовать символ новой строки и другие контрольные символы (те, чьи значения кода меньше 32, плюс DEL) как разделитель в списках. Такие разделители должны быть представлены буквально, во время обработки списка. Для параметров где строки раскрываются, вы можете записать разделитель используя обычную экранированную последовательность. Это будет обработано раскрытием до интерпретации строки как списка. Например, список доменов, разделённый символами новой строки, создаваемый поиском, вы можете обработать напрямую по строкам, как тут:</p>
<div class="highlight-python"><pre>domains = &lt;\n ${lookup mysql{.....}}</pre>
</div>
<p>Это позволяет уклониться от изменения разделителя списка в некоторых данных. Врятли вы захотите использовать управляющий символ как разделитель в параметрах которые не раскрываются, поскольку значение - буквальный текст. Однако, это может быть сделано путём задания значения в кавычках. Например:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">local_interfaces</span> <span class="o">=</span> <span class="s">&quot;&lt;</span><span class="se">\n</span><span class="s"> 127.0.0.1 </span><span class="se">\n</span><span class="s"> ::1&quot;</span>
</pre></div>
</div>
<p>В отличие от печатных символов разделителей, которые могут быть включены в список элементов путём удвоения, невозможно включить управляющие символы как данные. когда они заданы как разделитель. Два таких символа подряд интерпретируются как содержащие пустой элемент списка.</p>
</div>
<div class="section" id="ch06-21">
<span id="id27"></span><h2>Пустые элементы в списках<a class="headerlink" href="#ch06-21" title="Ссылка на этот заголовок">¶</a></h2>
<p>Пустые элементы в конце списков всегда игнорируются. Другими словами, конечный символ разделителя игнорируется. Таким образом, список в:</p>
<div class="highlight-python"><pre>senders = user@domain :</pre>
</div>
<p>содержит лишь один элемент. Если вы хотите включить пустую строку в качестве одного из элементов списка, она не должна быть последним элементом списка. Например, этот список содержит три элемента, второй из которых пустой:</p>
<div class="highlight-python"><pre>senders = user1@domain : : user2@domain</pre>
</div>
<p>Должно быть пустое пространство, между этими двумя двоеточиями, иначе они будут интерпретированы как один символ двоеточия (и тогда список содержал бы лишь один элемент). Если вы хотите задать список, содержащий лишь один пустой элемент, вы можете сделать это, как в этом примере:</p>
<div class="highlight-python"><pre>senders = :</pre>
</div>
<p>В этом случае, первый элемент пуст, и второй игнорируется, поскольку он в конце списка.</p>
</div>
<div class="section" id="ch06-22">
<span id="id28"></span><h2>Формат конфигурации драйвера<a class="headerlink" href="#ch06-22" title="Ссылка на этот заголовок">¶</a></h2>
<p>Есть отдельные части в конфигурации, для определения маршрутизаторов, транспортов и аутентификаторов. В каждой части, вы определяете множество примеров драйверов, каждый с его собственным набором параметров. Каждый пример драйвера задаётся последовательностью строк, такого типа:</p>
<div class="highlight-python"><pre>&lt;instance name&gt;:
  &lt;option&gt;
  ...
  &lt;option&gt;</pre>
</div>
<p>В следующем примере, имя образца - <strong>localuser</strong>, и он сопровождается тремя параметрами:</p>
<div class="highlight-python"><pre>localuser:
  driver = accept
  check_local_user
  transport = local_delivery</pre>
</div>
<p>Для каждого образца драйвера, вы определяете, какой модуль кода Exim он использует - путём установки параметра <strong>driver</strong>, и, необязательно, некоторые параметры конфигурации. Например, в случае транспортов, если вы хотите чтобы транспорт доставлял по SMTP, вы бы использовали драйвер <strong>smtp</strong>; если вы хотите доставлять в локальный файл, вы бы использовали драйвер <strong>appendfile</strong>. Каждый из драйверов подробно описан в его собственной главе, позже, в этом руководстве.</p>
<p>Вы можете иметь несколько маршрутизаторов, транспортов или аутентификаторов которые основаны на одном и том же основном драйвере (каждый должен иметь своё имя).</p>
<p>Порядок, в котором определены маршрутизаторы, важен, потому что адреса передаются на индивидуальные маршрутизаторы по одному, по порядку. Порядок в котором заданы транспорты, не имеет значения. Порядок в котором определены аутентификаторы, используется только когда Exim, как клиент, ищет их, чтобы найти тот, который соответствует предлагаемому сервером механизму аутентификации.</p>
<p>В пределах определения образца драйвера, есть два вида параметров: <em>универсальный</em> (<em>generic</em>) и <em>частный</em> (<em>private</em>). Общие параметры - те, которые применяются ко всем драйверам,  одного типа (т.е. все маршрутизаторы, все транспорты, или все аутентификаторы). Параметр <strong>driver</strong> - общий параметр, который должен появляться в каждом определении. Частные параметры являются специальными для каждого драйвера, и ни один не должен появляться, поскольку все они имеют значения по умолчанию.</p>
<p>Параметры могут появляться в любом порядке, за исключением параметра <strong>driver</strong> который должен предшествовать частным параметра, поскольку они зависимы от него. Поэтому, рекомендуется, чтобы параметр <strong>driver</strong> всегда была первой.</p>
<p>Имена экземпляров драйверов, которые используются для ссылок в логах, и других местах, могут быть любой последовательностью букв, цифр, и подчёркиваний (начинающихся с буквы), и должны быть уникальными среди драйверов того же типа. Маршрутизатор и транспорт (для примера), могут иметь одинаковое имя, но никакие два маршрутизатора не могут быть с одним именем. Имя экземпляра драйвера не должно быть перепутано с именем базового модуля драйвера. Например, конфигурационные строки:</p>
<div class="highlight-python"><pre>remote_smtp:
  driver = smtp</pre>
</div>
<p>создают экземпляр драйвера транспорта <strong>smtp</strong>, имя которого <strong>remote_smtp</strong>. Тот же самый код драйвера может использоваться более одного раза, с различными именами экземпляров и различными параметрами настроек, в каждом случае. Второй экземпляр транспорта <strong>smtp</strong>, с другими параметрами, может быть задан таким образом:</p>
<div class="highlight-python"><pre>special_smtp:
  driver = smtp
  port = 1234
  command_timeout = 10s</pre>
</div>
<p>Имена <strong>remote_smtp</strong> и <strong>special_smtp</strong> использовались бы для ссылки на эти экземпляры транспорта из маршрутизаторов, и эти имена фигурировали бы в строках логов.</p>
<p>Строки комментариев могут присутствовать в середине спецификации драйвера. Полный список параметров настройки для любого частного драйвера, включая все значения по умолчанию, может быть создан, используя параметр командной строки <strong>-bP</strong>.</p>
<table class="docutils footnote" frame="void" id="id29" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>т.е. существующий файл не будет перезаписан - прим. lissyara</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id30" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>(?)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id31" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id14">[3]</a></td><td>логическая переменная - прим. lissyara</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id32" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[4]</a></td><td>пару обратный слэш и символ - прим. lissyara.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id33" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[5]</a></td><td>помещение в двойные кавычки - прим. lissyara.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id34" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[6]</a></td><td>находящихся внутри двойных кавычек - прим. lissyara</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Содержание</a></h3>
  <ul>
<li><a class="reference internal" href="#">Файл конфигурации Exim во время выполнения</a><ul>
<li><a class="reference internal" href="#ch06-01">Использование иного файла конфигурации</a></li>
<li><a class="reference internal" href="#ch06-02">Формат файла конфигурации</a></li>
<li><a class="reference internal" href="#ch06-03">Включения файлов в файл конфигурации</a></li>
<li><a class="reference internal" href="#ch06-04">Макросы в конфигурационном файле</a></li>
<li><a class="reference internal" href="#ch06-05">Макроподстановка</a><ul>
<li><a class="reference internal" href="#ch06-06">Переопределение макроса</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ch06-07">Отмена значения макроса</a></li>
<li><a class="reference internal" href="#ch06-08">Пример использования макроса</a></li>
<li><a class="reference internal" href="#ch06-09">Условные пропуски в конфигурационном файле</a></li>
<li><a class="reference internal" href="#ch06-10">Общий синтаксис параметров</a></li>
<li><a class="reference internal" href="#ch06-11">Булевы параметры</a></li>
<li><a class="reference internal" href="#ch06-12">Целочисленные значения</a></li>
<li><a class="reference internal" href="#ch06-13">Целочисленные восьмеричные значения</a></li>
<li><a class="reference internal" href="#ch06-14">Числа с фиксированной точкой</a></li>
<li><a class="reference internal" href="#ch06-15">Временные интервалы</a></li>
<li><a class="reference internal" href="#ch06-16">Строковые значения</a></li>
<li><a class="reference internal" href="#ch06-17">Раскрытие строк</a></li>
<li><a class="reference internal" href="#ch06-18">Имена пользователей и групп</a></li>
<li><a class="reference internal" href="#ch06-19">Построение списков</a></li>
<li><a class="reference internal" href="#ch06-20">Смена разделителя списка</a></li>
<li><a class="reference internal" href="#ch06-21">Пустые элементы в списках</a></li>
<li><a class="reference internal" href="#ch06-22">Формат конфигурации драйвера</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="ch05.html" title="предыдущая глава">Командная строка Exim</a></li>
      <li>Next: <a href="ch07.html" title="следующая глава">Файл конфигурации по умолчанию</a></li>
  </ul></li>
</ul>
  <h3>На этой странице</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ch06.txt"
           rel="nofollow">Показать исходный текст</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Быстрый поиск</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Искать" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Введите слова для поиска или имя модуля, класса или функции.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Exim Maintainers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>